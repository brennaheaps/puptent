<!DOCTYPE html>
<title></title>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no">
<link rel="stylesheet" href="/puptent.css">
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="/puptent.js"></script>
<script type="text/javascript">
    
    /* ----------------------------------------
        
        Pup Tent
        (c) 2012 @toddheasley
        
    ---------------------------------------- */
    
    var HTML = {
        fail: function() {
            $("body").empty();
        },
        show: function() {
            var indexItemHTML = $("div#index ul").html();
            var bodyElementHTML = $("div#body").html();
            var bodyElementTextHTML = $("div#body span").html();
            $("title").text("@" + $.fn.puptent("screenName") + " #" + $.fn.puptent("hashtag"));
            $("p#toggle a").text("#" + $.fn.puptent("hashtag"));
            $("div#index ul").empty();
            $("h1 a").attr("href", $.fn.puptent("profileURL"));
            $("h1 a img").attr("src",  $.fn.puptent("profileImageURL"));
            $("h1 a span").text("@" + $.fn.puptent("screenName"));
            for (item in  $.fn.puptent("items")) {
                $("div#index ul").append(indexItemHTML);
                $("div#index ul li:last a").attr("href", "#" + item).children("span").text(" #" + item);
            }
            $("p#toggle a").click(function() {
                $(document).scrollTop(0);
                $(this).hide();
                $("body").addClass("open");
                return false;
            });
            $("div#index ul li a").click(function() {
                var name = $(this).attr("href").substr(1);
                $("div#body").empty();
                var handleTimeout = function() {
                    $(document).scrollTop(0);
                    $("p#toggle a").show();
                    for (item in  $.fn.puptent("items")[name]) {
                        var text = $.fn.puptent("items")[name][item].text.replace("#" + $.fn.puptent("hashtag"), "");
                        for (url in $.fn.puptent("items")[name][item].urls) {
                            url = $.fn.puptent("items")[name][item].urls[url];
                            text = text.replace(url, bodyElementTextHTML.replace("\"\"", "\"" + url + "\"").replace("><", ">" + url + "<"));
                        }
                        $("div#body").append(bodyElementHTML);
                        if ($.fn.puptent("items")[name][item].mediaURL.length > 0) {
                            $("div#body p:last a").attr("href", $.fn.puptent("items")[name][item].mediaURL);
                            $("div#body p:last img").attr("src", $.fn.puptent("items")[name][item].mediaURL);
                        } else {
                            $("div#body p:last a").remove();
                        }
                        $("div#body p:last span").html(text);
                    }
                };
                $("div#index ul li a").removeClass("selected");
                $(this).addClass("selected");
                $("body").removeClass("open");
                setTimeout(handleTimeout, 600);
            });
            if (window.location.hash.length > 1) {
                $("div#index ul li a[href='" + window.location.hash + "']").click();
            } else {
                $("div#index ul li:first a").click();
                if ($("div#index ul li").length == 1) {
                    $("h1").detach().appendTo("div#body");
                    $("div#index, p#toggle").remove();
                } else {
                    window.location.hash = $("div#index ul li:first a").attr("href");
                }
            }
            $("div#body, div#index, p#toggle").show();
        }
    };
    
    $(document).ready(function() {
        $.fn.puptent("init", function() {
            if ($.fn.puptent("hasItems")) {
                HTML.show();
            } else {
                HTML.fail();
            }
        });
    });
    
</script>
<div id="index">
    <ul>
        <li><a href=""><span></span> <big>&bull;</big></a></li>
    </ul>
    <h1><a href=""><img src=""> <span></span></a></h1>
</div>
<div id="body">
    <p><a href=""><img src=""></a> <span><a href=""></a></span></p>
</div>
<p id="toggle"><a href=""></a></p>