<!DOCTYPE html>
<title></title>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no">
<link rel="stylesheet" href="/puptent.css">
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="/puptent.js"></script>
<script type="text/javascript">
    
    /* -------------------------------------
        
        Pup Tent
        (c) 2012 @toddheasley
        
    ------------------------------------- */
    
    var HTML = {
        fail: function() {
            $("body").empty();
        },
        show: function() {
            var menuListItem = $("#menu ul").html();
            var bodyParagraphSpan = $("#body span").html();
            var bodyParagraph = $("#body").html();
            $("title").text("@" + $.fn.puptent("screenName") + " #" + $.fn.puptent("hashtag"));
            $("#menu ul").empty();
            $("h1 a").attr("href", $.fn.puptent("profileURL"));
            $("h1 a img").attr("src",  $.fn.puptent("profileImageURL"));
            $("h1 a span").text("@" + $.fn.puptent("screenName"));
            $("h2").text("#" + $.fn.puptent("hashtag"));
            for (item in  $.fn.puptent("items")) {
                $("#menu ul").append(menuListItem);
                $("#menu ul li:last a").attr("href", "#" + item).children("span").text(" #" + item);
            }
            $("#info").addClass("hide");
            $("#menu h2").click(function() {
                var info = $(this).parents("div#info");
                if (info.hasClass("hide") || info.hasClass("show")) {
                    info.toggleClass("hide").toggleClass("show");
                }
            });
            $("#menu ul li a").click(function() {
                var name = $(this).attr("href").substr(1);
                $("#body").empty();
                $("#name").text("#" + name);
                for (item in  $.fn.puptent("items")[name]) {
                    var text = $.fn.puptent("items")[name][item].text.replace("#" + $.fn.puptent("hashtag"), "");
                    for (url in $.fn.puptent("items")[name][item].urls) {
                        url = $.fn.puptent("items")[name][item].urls[url];
                        text = text.replace(url, bodyParagraphSpan.replace("\"\"", "\"" + url + "\"").replace("><", ">" + url + "<"));
                    }
                    $("#body").prepend(bodyParagraph);
                    if ($.fn.puptent("items")[name][item].mediaURL.length > 0) {
                        $("#body p:first a").attr("href", $.fn.puptent("items")[name][item].mediaURL);
                        $("#body p:first img").attr("src", $.fn.puptent("items")[name][item].mediaURL);
                    } else {
                        $("#body p:first a").remove();
                    }
                    $("#body p:first span").html(text);
                }
                $("#menu ul li a").removeClass("selected");
                $(this).addClass("selected");
                if ($("#info").hasClass("show")) {
                    setTimeout("$(\"#menu h2\").click()", 300);
                }
            });
            $("body").addClass("more");
            if (window.location.hash.length > 1) {
                $("#menu ul li a[href='" + window.location.hash + "']").click();
            } else {
                $("#menu ul li:first a").click();
                if ($("#menu ul li").length == 1) {
                    $("#menu ul").remove();
                    $("#info").removeClass("hide");
                    $("#name").text("#" + $.fn.puptent("hashtag"));
                    $("body").removeClass("more").addClass("less");
                } else {
                    window.location.hash = $("#menu ul li:first a").attr("href");
                }
            }
            $("#info, #body").show();
        }
    };
    
    $(document).ready(function() {
        $.fn.puptent("init", function() {
            if ($.fn.puptent("hasItems")) {
                HTML.show();
            } else {
                HTML.fail();
            }
        });
    });
    
</script>
<div id="info">
    <h1><a href=""><img src=""> <span></span></a></h1>
    <div id="menu">
        <h2></h2>
        <ul>
            <li><a href=""><span></span> <big>&bull;</big></a></li>
        </ul>
    </div>
</div>
<h2 id="name"></h2>
<div id="body">
    <p><a href=""><img src=""></a> <span><a href=""></a></span></p>
</div>